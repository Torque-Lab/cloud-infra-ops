apiVersion: v1
kind: Service
#control plane service for redis wire protocol to fetch dynamic route table
metadata:
  name: "{{ .Chart.Name }}-control-plane-service"
  annotations:
    argocd.argoproj.io/sync-wave: "-22"
spec:
  selector:
    app: {{ .Chart.Name }}
  ports:
  - protocol: TCP
    name: {{ (index .Values.redisProtocolGateway.ports 1).name }}
    port: {{ (index .Values.redisProtocolGateway.ports 1).port }}
    targetPort: {{ (index .Values.redisProtocolGateway.ports 1).containerPort }}
  type: ClusterIP